{% extends 'base.html' %}

{% block content %}
    {% if 'check_in' in formData %}
        <h1>Time Passed: {{time_passed}}</h1>
        <h1>Amount Paid: {{amount_paid}}</h1>
    {% endif %}
    <form action="/room/{{room_no}}" method="post" autocomplete="off">
        <div class="input-div">
            <label for="name">Name</label>
            <input type="text" name="name" id="name" value="{{ formData['name'] }}" required>
        </div>
        <div class="input-div">
            <label for="phone">Phone No.</label>
            <input type="number" name="phone" id="phone" value="{{ formData['phone'] }}" required>
        </div>
        <div class="input-div">
            <label for="address">Address</label>
            <input  type="text" name="address" id="address" value="{{ formData['address'] }}" required>
        </div>
        <div class="input-div">
            <label for="id_type">ID Proof</label>
            <input type="text" name="id_type" id="id_type" list="id_type_options" autocomplete="off" value="{{ formData['id_type'] }}" required>
            <datalist id="id_type_options">
                <option value="Aadhar">Aadhar</option>
                <option value="Driving License">Driving License</option>
                <option value="Passport">Passport</option>
                <option value="PAN">PAN</option>
            </datalist>
        </div>
        <div class="input-div">
            <label for="id_detail">ID Details</label>
            <input type="text" name="id_detail" id="id_detail" value="{{ formData['id_detail'] }}" required>
        </div>
        <div class="input-div">
            <input type="radio" name="ac" id="ac" value="ac" {{ 'checked' if formData['ac'] == 'ac' }}>
            <label for="ac">AC</label>
            <input type="radio" name="ac" id="non_ac" value="non_ac" {{ 'checked' if formData['ac'] == 'non_ac' }}>
            <label for="non_ac">Non AC</label>
        </div>
        <div class="input-div">
            <label for="rpd">Room Rent Per Day:</label>
            <input type="number" name="rpd" id="rpd" value="{{ formData['rpd'] }}">
        </div>
        <div class="input-div">
            <label for="check_in">Check In</label>
            <input type="datetime-local" name="checkin" id="check_in" value="{{ formData['check_in'] }}" required>
        </div>
        {% if formData['check_in'] %}
            <div class="input-div">
                <label for="check_out">Check Out</label>
                <input type="datetime-local" name="checkout" id="check_out" value="{{ formData['check_out'] }}">
            </div>
        {% endif %}
        <div class="submit-div">
            <button type="submit">Submit</button>
        </div>
    </form>
    <script>
        document.getElementById('name').addEventListener('keydown', (e) => {
            // console.log(e.target);
            // fetch('http://127.0.0.1:5000/api/search?name='+e.target.value).then((res) => {
            //     if (!res.ok) {
            //         console.log(res.status);
            //     }
            //     return res.json();
            // }).then((data) => {
            //     console.log(data);
            // }).catch(err => {
            //     console.error(err)
            // })
        })
        const date = Date.parse(document.getElementById('check_in').value + 'Z');
    </script>
{% endblock %}